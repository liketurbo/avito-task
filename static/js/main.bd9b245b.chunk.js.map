{"version":3,"sources":["components/Grid/index.module.scss","components/Header/index.module.scss","components/Card/index.module.scss","components/App/index.tsx","components/Router/context.ts","components/Card/index.tsx","components/Grid/index.tsx","components/Header/index.tsx","pages/main.tsx","index.tsx","components/Router/index.tsx"],"names":["module","exports","grid","header","card","img","title","price","seller","star","camera","heart","heart_active","App","_ref","children","react_default","a","createElement","Fragment","RouterContext","createContext","Card","pictures","id","category","_useState","useState","JSON","parse","localStorage","getItem","_useState2","Object","slicedToArray","favorites","setFavorites","useEffect","setItem","stringify","className","s","src","alt","href","concat","toString","replace","name","react_rating_esm","readonly","initialRating","rating","emptySymbol","fullSymbol","length","role","aria-label","c","defineProperty","includes","onClick","stateFavorites","filter","v","toConsumableArray","Grid","Header","reducer","state","action","type","produce","draft","loading","payload","error","allData","products","map","product","sellerId","relationships","sellers","find","objectSpread","renderData","sorted","value","categorized","sort","b","ReactDOM","render","components_App","history","createBrowserHistory","basename","process","context","Provider","react_router","react_router_dom","exact","path","component","_useReducer","useReducer","_useReducer2","dispatch","requests","push","axios","then","res","data","Promise","all","_ref2","_ref3","_unused","console","log","components_Header","react_select_browser_esm","styles","container","base","flexBasis","defaultValue","label","options","onChange","_ref4","asyncToGenerator","regenerator_default","mark","_callee","option","wrap","_context","prev","next","stop","_x","apply","this","arguments","_ref5","_callee2","_context2","_x2","components_Grid","components_Card","assign","key","document","getElementById"],"mappings":"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","file":"static/js/main.bd9b245b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"grid\":\"Grid_grid__2245Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__MbTxY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3rpIc\",\"img\":\"Card_img__3jbA_\",\"title\":\"Card_title__1cpd-\",\"price\":\"Card_price__1DVSA\",\"seller\":\"Card_seller__3H-tn\",\"star\":\"Card_star__3rt6h\",\"camera\":\"Card_camera__2K8Zz\",\"heart\":\"Card_heart__3gQ3v\",\"heart_active\":\"Card_heart_active__JJJK0\"};","import './index.module.scss';\n\nimport React, { FC } from 'react';\n\nconst App: FC = ({ children }) => <>{children}</>;\n\nexport default App;\n","import { History } from 'history';\r\nimport { createContext } from 'react';\r\n\r\nconst RouterContext = createContext<History>(null as any);\r\n\r\nexport default RouterContext;\r\n","import c from 'classnames';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Rating from 'react-rating';\r\n\r\nimport { ISeller } from '../Seller';\r\nimport s from './index.module.scss';\r\n\r\nexport interface ICard {\r\n  address: {\r\n    lat: number;\r\n    lng: number;\r\n  };\r\n  body_type: string;\r\n  category: string;\r\n  gearbox: string;\r\n  id: string;\r\n  pictures: string[];\r\n  price?: number;\r\n  relationships: {\r\n    seller: string;\r\n  };\r\n  title: string;\r\n  year: number;\r\n  seller: ISeller;\r\n}\r\n\r\nconst Card = ({ title, price, pictures, id, seller, category }: ICard) => {\r\n  const [favorites, setFavorites] = useState(JSON.parse(\r\n    localStorage.getItem('favorites') || '[]'\r\n  ) as string[]);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem('favorites', JSON.stringify(favorites));\r\n  }, [favorites]);\r\n\r\n  return (\r\n    <article className={s.card}>\r\n      <img className={s.img} src={pictures[0]} alt={category} />\r\n      <a className={s.title} href={`https://avito.dump.academy/products/${id}`}>\r\n        <h1>{title}</h1>\r\n      </a>\r\n      <span className={s.price}>\r\n        {price\r\n          ? `${price\r\n              .toString()\r\n              .replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ')} ₽`\r\n          : 'Цена не указана'}\r\n      </span>\r\n      <a\r\n        className={s.seller}\r\n        href={`https://avito.dump.academy/sellers/${seller.id}`}\r\n      >\r\n        <span>{seller.name}</span>\r\n      </a>\r\n      <Rating\r\n        readonly\r\n        initialRating={seller.rating}\r\n        emptySymbol={<span className={s.star}>☆</span>}\r\n        fullSymbol={<span className={s.star}>★</span>}\r\n      />\r\n      {pictures.length > 1 && (\r\n        <span className={s.camera} role=\"img\" aria-label=\"camera\">\r\n          📷 {pictures.length - 1}\r\n        </span>\r\n      )}\r\n      <button\r\n        className={c(s.heart, {\r\n          [s.heart_active]: favorites.includes(id)\r\n        })}\r\n        onClick={() => {\r\n          const stateFavorites = JSON.parse(\r\n            localStorage.getItem('favorites') || '[]'\r\n          ) as string[];\r\n\r\n          if (favorites.includes(id)) {\r\n            setFavorites(stateFavorites.filter(v => v !== id));\r\n          } else {\r\n            setFavorites([...stateFavorites, id]);\r\n          }\r\n        }}\r\n      >\r\n        ❤\r\n      </button>\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React, { FC } from 'react';\r\n\r\nimport s from './index.module.scss';\r\n\r\nconst Grid: FC = ({ children }) => <div className={s.grid}>{children}</div>;\r\n\r\nexport default Grid;\r\n","import React, { FC } from 'react';\r\n\r\nimport s from './index.module.scss';\r\n\r\nconst Header: FC = ({ children }) => (\r\n  <header className={s.header}>{children}</header>\r\n);\r\n\r\nexport default Header;\r\n","import axios from 'axios';\r\nimport produce from 'immer';\r\nimport React, { Reducer, useEffect, useReducer } from 'react';\r\nimport Select from 'react-select';\r\n\r\nimport Card, { ICard } from '../components/Card';\r\nimport Grid from '../components/Grid';\r\nimport Header from '../components/Header';\r\n\r\nconst reducer: Reducer<any, any> = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LOADING':\r\n      // Set loading status\r\n      return produce(state, (draft: any) => {\r\n        draft.loading = action.payload;\r\n      });\r\n    case 'SET_ERROR':\r\n      // Set error status\r\n      return produce(state, (draft: any) => {\r\n        draft.error = action.payload;\r\n      });\r\n    case 'SET_ALL_DATA':\r\n      // Only once, stores all data\r\n      return produce(state, (draft: any) => {\r\n        draft.allData = action.payload.products.map((product: any) => {\r\n          const sellerId = product.relationships.seller;\r\n          const seller = action.payload.sellers.find(\r\n            ({ id }: any) => id === sellerId\r\n          );\r\n\r\n          return { ...product, seller };\r\n        });\r\n\r\n        draft.renderData = draft.allData;\r\n      });\r\n    case 'SET_RENDER_DATA_BY_SORT':\r\n      return produce(state, (draft: any) => {\r\n        /**\r\n         * 1. Save in the state currently selected sort option\r\n         * 2. Sort data already sorted by category\r\n         */\r\n        draft.sorted = action.payload[0];\r\n\r\n        switch (action.payload[0]) {\r\n          case 'default':\r\n            draft.renderData = draft.allData.filter(\r\n              (value: ICard) =>\r\n                value.category === draft.categorized ||\r\n                draft.categorized === 'all' // hack if category set to 'all'\r\n            );\r\n            break;\r\n          case 'favorite':\r\n            draft.renderData = state.renderData.filter((value: ICard) =>\r\n              action.payload[1].includes(value.id)\r\n            );\r\n            break;\r\n          case 'cheap':\r\n            draft.renderData = draft.renderData.sort(\r\n              (a: any, b: any) => a.price - b.price\r\n            );\r\n            break;\r\n          case 'expensive':\r\n            draft.renderData = draft.renderData.sort(\r\n              (a: any, b: any) => b.price - a.price\r\n            );\r\n            break;\r\n        }\r\n      });\r\n    case 'SET_RENDER_DATA_BY_CATEGORY':\r\n      return produce(state, (draft: any) => {\r\n        /**\r\n         * 1. Save in the state currently selected sort option\r\n         * 2. Sort data by category\r\n         */\r\n        draft.categorized = action.payload[0];\r\n\r\n        switch (action.payload[0]) {\r\n          case 'all':\r\n            draft.renderData = draft.allData;\r\n            break;\r\n          case 'immovable':\r\n            draft.renderData = draft.allData.filter(\r\n              (value: ICard) => value.category === 'immovable'\r\n            );\r\n            break;\r\n          case 'cameras':\r\n            draft.renderData = draft.allData.filter(\r\n              (value: ICard) => value.category === 'cameras'\r\n            );\r\n            break;\r\n          case 'auto':\r\n            draft.renderData = draft.allData.filter(\r\n              (value: ICard) => value.category === 'auto'\r\n            );\r\n            break;\r\n          case 'laptops':\r\n            draft.renderData = draft.allData.filter(\r\n              (value: ICard) => value.category === 'laptops'\r\n            );\r\n            break;\r\n        }\r\n      });\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default () => {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    loading: true,\r\n    error: false,\r\n    sorted: 'default',\r\n    categorized: 'all',\r\n    allData: [],\r\n    renderData: []\r\n  });\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const requests = [];\r\n\r\n      requests.push(\r\n        axios('https://avito.dump.academy/products').then(res => res.data.data)\r\n      );\r\n      requests.push(\r\n        axios('https://avito.dump.academy/sellers').then(res => res.data.data)\r\n      );\r\n\r\n      Promise.all(requests).then(([products, sellers]) => {\r\n        dispatch({ type: 'SET_ALL_DATA', payload: { products, sellers } });\r\n      });\r\n    } catch {\r\n      dispatch({ type: 'SET_ERROR', payload: true });\r\n    }\r\n\r\n    dispatch({ type: 'SET_LOADING', payload: false });\r\n  }, []);\r\n\r\n  console.log(state);\r\n\r\n  return (\r\n    <>\r\n      <Header>\r\n        <Select\r\n          styles={{\r\n            container: base => ({\r\n              ...base,\r\n              flexBasis: 170\r\n            })\r\n          }}\r\n          defaultValue={{ value: 'default', label: 'По умолчанию' }}\r\n          options={[\r\n            { value: 'default', label: 'По умолчанию' },\r\n            { value: 'favorite', label: 'Избранные' },\r\n            { value: 'cheap', label: 'Дешевле' },\r\n            { value: 'expensive', label: 'Дороже' }\r\n          ]}\r\n          onChange={async (option: any) => {\r\n            await dispatch({\r\n              type: 'SET_RENDER_DATA_BY_CATEGORY',\r\n              payload: [state.categorized]\r\n            });\r\n            await dispatch({\r\n              type: 'SET_RENDER_DATA_BY_SORT',\r\n              payload: [\r\n                option.value,\r\n                JSON.parse(localStorage.getItem('favorites') || '[]')\r\n              ]\r\n            });\r\n          }}\r\n        />\r\n        <Select\r\n          onChange={async (option: any) => {\r\n            await dispatch({\r\n              type: 'SET_RENDER_DATA_BY_CATEGORY',\r\n              payload: [option.value]\r\n            });\r\n            await dispatch({\r\n              type: 'SET_RENDER_DATA_BY_SORT',\r\n              payload: [\r\n                state.sorted,\r\n                JSON.parse(localStorage.getItem('favorites') || '[]')\r\n              ]\r\n            });\r\n          }}\r\n          styles={{\r\n            container: base => ({\r\n              ...base,\r\n              flexBasis: 170\r\n            })\r\n          }}\r\n          defaultValue={{ value: 'all', label: 'Все' }}\r\n          options={[\r\n            { value: 'all', label: 'Все' },\r\n            { value: 'immovable', label: 'Недвижимость' },\r\n            { value: 'cameras', label: 'Фотоаппараты' },\r\n            { value: 'auto', label: 'Автомобили' },\r\n            { value: 'laptops', label: 'Ноутбуки' }\r\n          ]}\r\n        />\r\n      </Header>\r\n      <Grid>\r\n        {state.renderData.length > 0 &&\r\n          state.renderData.map((product: any) => (\r\n            <Card key={product.id} {...product} />\r\n          ))}\r\n      </Grid>\r\n    </>\r\n  );\r\n};\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './components/App';\nimport { Route, Router } from './components/Router';\nimport main from './pages/main';\n\nReactDOM.render(\n  <App>\n    <Router>\n      <Route exact path=\"/\" component={main} />\n    </Router>\n  </App>,\n  document.getElementById('root')\n);\n","import { createBrowserHistory } from 'history';\r\nimport React, { FC, useContext, useEffect, useState } from 'react';\r\nimport { Route, Router as ReactRouterDOM } from 'react-router-dom';\r\n\r\nimport RouterContext from './context';\r\n\r\nconst Router: FC = ({ children }) => {\r\n  const history = createBrowserHistory({ basename: process.env.PUBLIC_URL });\r\n\r\n  return (\r\n    <RouterContext.Provider value={history}>\r\n      <ReactRouterDOM history={history}>{children}</ReactRouterDOM>\r\n    </RouterContext.Provider>\r\n  );\r\n};\r\n\r\nconst useRouter = () => {\r\n  const history = useContext(RouterContext);\r\n  const [location, setLocation] = useState(history.location);\r\n\r\n  useEffect(() => {\r\n    const unListen = history.listen(newLocation => {\r\n      setLocation(newLocation);\r\n    });\r\n\r\n    return () => unListen();\r\n  }, [history]);\r\n\r\n  return {\r\n    ...history,\r\n    location\r\n  };\r\n};\r\n\r\nexport { Route, useRouter, Router };\r\n"],"sourceRoot":""}